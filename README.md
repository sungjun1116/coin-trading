# üöÄ Cryptocurrency Algorithm Trading Platform

[![Java](https://img.shields.io/badge/Java-21-orange.svg)](https://openjdk.java.net/projects/jdk/21/)
[![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.x-brightgreen.svg)](https://spring.io/projects/spring-boot)
[![Gradle](https://img.shields.io/badge/Gradle-8.x-blue.svg)](https://gradle.org/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

## üìñ Overview

A **production-ready** Java cryptocurrency trading platform built with **Layered Architecture** principles. This project provides type-safe, high-performance API clients for multiple cryptocurrency exchanges with comprehensive error handling, authentication, and monitoring capabilities.

### ‚ú® Key Features

- üèóÔ∏è **Layered Architecture**: Clean separation of concerns with infrastructure, service, and application layers
- üîí **Multi-Exchange Support**: Coinone and Binance APIs with unified interfaces
- üõ°Ô∏è **Type-Safe Operations**: Comprehensive DTO validation and error handling
- üîê **Secure Authentication**: Automatic request signing with HMAC-SHA algorithms
- üìä **Comprehensive Logging**: Request/response tracking with structured logging
- ‚ö° **Declarative HTTP Clients**: Interface-based HTTP clients using Spring 6 HTTP Interface
- üß™ **Test Coverage**: Extensive unit and integration tests
- üìö **Rich Documentation**: Complete JavaDoc and API documentation

## üèõÔ∏è Architecture

This project follows **Layered Architecture** principles for maintainability and scalability:

```text
üìÅ Application Layer
‚îú‚îÄ‚îÄ üéØ Service Layer (Business Logic)
‚îî‚îÄ‚îÄ üèóÔ∏è Infrastructure Layer
    ‚îú‚îÄ‚îÄ üåê Client Layer (External APIs)
    ‚îú‚îÄ‚îÄ ‚öôÔ∏è Configuration Layer
    ‚îú‚îÄ‚îÄ üö® Exception Handling
    ‚îî‚îÄ‚îÄ üîå Interceptors & Middleware
```

## üõ†Ô∏è Technology Stack

| Component | Technology | Version |
|-----------|------------|---------|
| **Language** | Java | 21 LTS |
| **Framework** | Spring Boot | 3.x |
| **Build Tool** | Gradle | 8.x |
| **Web Framework** | Spring Web | MVC |
| **Template Engine** | Thymeleaf | 3.x |
| **HTTP Client** | HTTP Interface | Declarative |
| **Real-time** | WebSocket + STOMP | Native |
| **Testing** | JUnit 5 + AssertJ | Latest |
| **Documentation** | JavaDoc | Built-in |

## üöÄ Quick Start

### Prerequisites

```bash
java --version    # Java 21+
gradle --version  # Gradle 8.x+
```

### 1. Clone & Setup

```bash
git clone https://github.com/sungjun1116/coin-trading.git
cd coin-trading
```

### 2. Environment Configuration

Create your environment configuration:

```yaml
# application.yml
coinone:
  api:
    public-url: https://api.coinone.co.kr/public/v2
    private-url: https://api.coinone.co.kr/v2.1/
    access-token: ${COINONE_ACCESS_TOKEN}
    secret-key: ${COINONE_SECRET_KEY}
    connection-timeout: 3000
    read-timeout: 5000
    signature-algorithm: HmacSHA512

binance:
  api:
    url: https://api.binance.com
    api-key: ${BINANCE_API_KEY}
    secret-key: ${BINANCE_SECRET_KEY}
    connection-timeout: 3000
    read-timeout: 5000
    signature-algorithm: HmacSHA256
```

### 3. Build & Run

```bash
# Build the project
./gradlew build

# Run tests
./gradlew test

# Start the application
./gradlew bootRun
```

## üìÇ Project Structure

```text
üèóÔ∏è Layered Architecture Structure

src/main/java/sungjun/bitcoin/algorithmtrading/
‚îú‚îÄ‚îÄ üéØ service/                           # üéØ Service Layer
‚îÇ   ‚îî‚îÄ‚îÄ CoinoneService.java              # Business logic & orchestration
‚îÇ
‚îú‚îÄ‚îÄ üèóÔ∏è infrastructure/                   # üèóÔ∏è Infrastructure Layer
‚îÇ   ‚îú‚îÄ‚îÄ üåê client/                       # External API clients
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ coinone/                     # Coinone exchange integration
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CoinoneAccountApiClient.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CoinoneOrderApiClient.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CoinoneTickerApiClient.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ request/                 # Request DTOs
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ response/                # Response DTOs
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ binance/                     # Binance exchange integration
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ BinanceAccountApiClient.java
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ request/                 # Request DTOs
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ response/                # Response DTOs
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ ‚öôÔ∏è config/                       # Configuration layer
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ coinone/                     # Coinone-specific config
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CoinoneProperties.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CoinoneRestClientConfig.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CoinoneResponseErrorHandler.java
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ binance/                     # Binance-specific config
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ BinanceProperties.java
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ BinanceRestClientConfig.java
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ BinanceResponseErrorHandler.java
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üö® exception/                    # Exception handling
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ coinone/CoinoneApiException.java
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ binance/BinanceApiException.java
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ üîå interceptor/                  # Middleware & interceptors
‚îÇ       ‚îú‚îÄ‚îÄ common/LoggingInterceptor.java
‚îÇ       ‚îú‚îÄ‚îÄ coinone/CoinoneAuthenticationInterceptor.java
‚îÇ       ‚îî‚îÄ‚îÄ binance/BinanceAuthenticationInterceptor.java
‚îÇ
‚îî‚îÄ‚îÄ üîß util/                             # Utility classes
    ‚îî‚îÄ‚îÄ SignatureUtils.java              # Cryptographic utilities

src/test/java/                           # üß™ Test Layer
‚îú‚îÄ‚îÄ api/service/                         # Service layer tests
‚îî‚îÄ‚îÄ infrastructure/                      # Infrastructure tests
    ‚îú‚îÄ‚îÄ client/                          # API client tests
    ‚îî‚îÄ‚îÄ config/                          # Configuration tests
```

## üí° Usage Examples

### üè™ Service Layer Usage (Recommended)

```java
@Autowired
private CoinoneService coinoneService;

// Get ticker information through service layer
public void getMarketData() {
    CoinoneTicker ticker = coinoneService.getTicker("KRW", "BTC");
    System.out.println("BTC/KRW Price: " + ticker.getLast());
}
```

### üåê Declarative HTTP Interface Clients

This project implements declarative HTTP clients using **Spring 6 HTTP Interface**:

#### Coinone API (HTTP Interface)

```java
@Component
@HttpExchange
public interface CoinoneAccountApiClient {
    
    @PostExchange("/account/balance")
    CoinoneAccountApiResponse getAccount(@RequestBody CoinoneAccountRequest requestBody);
    
    @PostExchange("/account/balance/all")
    CoinoneAccountApiResponse getAccounts(@RequestBody CoinoneAccountRequest requestBody);
}

// Usage
@Autowired
private CoinoneAccountApiClient coinoneAccountApiClient;

public void getAccountInfo() {
    CoinoneAccountRequest request = CoinoneAccountRequest.builder()
            .accessToken("your-access-token")
            .nonce(UUID.randomUUID().toString())
            .build();
    
    CoinoneAccountApiResponse response = coinoneAccountApiClient.getAccount(request);
    response.getBalances().forEach(balance -> 
        log.info("Currency: {}, Available: {}", 
                balance.getCurrency(), balance.getAvailable())
    );
}
```

#### Binance API (HTTP Interface)

```java
@Component
@HttpExchange
public interface BinanceAccountApiClient {
    
    @GetExchange("/api/v3/account")
    BinanceAccountApiResponse getAccount(
        @RequestParam(value = "omitZeroBalances", required = false) boolean omitZeroBalances,
        @RequestParam(value = "recvWindow", required = false) long recvWindow,
        @RequestParam("timestamp") long timestamp
    );
    
    // Default methods for convenience
    default BinanceAccountApiResponse getAccount(long timestamp) {
        return getAccount(false, 5000L, timestamp);
    }
}

// Usage
@Autowired
private BinanceAccountApiClient binanceAccountApiClient;

public void getAccountInfo() {
    long timestamp = System.currentTimeMillis();
    BinanceAccountApiResponse response = binanceAccountApiClient.getAccount(timestamp);
    
    response.getBalances().forEach(balance -> 
        log.info("Asset: {}, Free: {}, Locked: {}", 
                balance.getAsset(), balance.getFree(), balance.getLocked())
    );
}
```

### üîß HTTP Interface Benefits

- **Declarative Approach**: Automatic implementation generation from interface definitions
- **Type Safety**: Compile-time type verification
- **Boilerplate Reduction**: Minimal repetitive HTTP client code
- **WebClient Based**: High performance guaranteed through internal WebClient usage
- **Spring Integration**: Perfect integration with Spring ecosystem

## üîê Security Features

### Authentication Methods

| Exchange | Algorithm | Header Format |
|----------|-----------|---------------|
| **Coinone** | HMAC-SHA512 | `X-COINONE-PAYLOAD`, `X-COINONE-SIGNATURE` |
| **Binance** | HMAC-SHA256 | `X-MBX-APIKEY`, Query Parameter Signature |

### Error Handling

```java
try {
    CoinoneAccountApiResponse response = coinoneAccountApiClient.getAccount(request);
    // Process successful response
} catch (CoinoneApiException e) {
    log.error("Coinone API Error - Code: {}, Message: {}", 
              e.getErrorCode(), e.getMessage());
} catch (BinanceApiException e) {
    log.error("Binance API Error - Code: {}, Message: {}", 
              e.getErrorCode(), e.getErrorMessage());
}
```

## üß™ Testing

```bash
# Run all tests
./gradlew test

# Run integration tests
./gradlew integrationTest

# Generate test report
./gradlew jacocoTestReport
```

### Test Structure

- **Unit Tests**: Individual component testing
- **Integration Tests**: API client integration testing
- **Service Tests**: Business logic testing

## üìä Monitoring & Logging

The application provides comprehensive logging for:

- üì® **Request/Response Tracking**: All API calls logged with correlation IDs
- üö® **Error Monitoring**: Structured exception logging
- ‚è±Ô∏è **Performance Metrics**: Request duration and success rates
- üîí **Security Events**: Authentication and authorization tracking

## ü§ù Contributing

We welcome contributions! Please follow these guidelines:

1. **Fork** the repository
2. **Create** a feature branch (`git checkout -b feature/#{Issue ID}amazing-feature`)
3. **Commit** your changes (`git commit -m 'Add amazing feature'`)
4. **Push** to the branch (`git push origin feature/#{Issue ID}amazing-feature`)
5. **Open** a Pull Request

### Development Guidelines

- Follow **Clean Code** principles
- Maintain **Layered Architecture** separation
- Add comprehensive **JavaDoc** documentation
- Include **unit and integration tests**
- Follow existing **code style** conventions

## üìö API Documentation

### Exchange API References

- üü° [Coinone API Documentation](https://docs.coinone.co.kr/)
- üü† [Binance API Documentation](https://developers.binance.com/docs/binance-spot-api-docs)

### Error Code References

- üìÑ [Coinone Error Codes](docs/coinone-error-codes.md)
- üìÑ [Binance Error Codes](docs/binance-error-codes.md)

## üêõ Known Issues & Limitations

- Rate limiting not implemented (planned for v2.0)
- WebSocket streaming not supported (planned for v2.0)
- Limited to spot trading (futures trading planned)

## üìÑ License

This project is licensed under the **MIT License** - see the [LICENSE](LICENSE) file for details.

## üôè Acknowledgments

- Spring Boot team for the excellent framework
- Cryptocurrency exchange APIs for public access
- Open source community for inspiration and tools

---

<div align="center">

**Made with ‚ù§Ô∏è by [sungjun1116](https://github.com/sungjun1116)**

*If this project helps you, please consider giving it a ‚≠ê!*

</div>
